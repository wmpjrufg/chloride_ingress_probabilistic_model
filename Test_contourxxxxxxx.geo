//A simple example for remeshing contours by Mahmoud Shaqfa
SetFactory("Built-in");
Geometry.Tolerance = 1e-10;

//Add stone 0
Point(1) = {76560.05483624834,-34647.65401832286,0,2500};
Point(2) = {76560.05483624834,-34647.65401832286,0,2500};
Point(3) = {76248.00182523286,-36694.496407942395,0,2500};
Point(4) = {76309.59148012189,-39021.03089656441,0,2500};
Point(5) = {76268.27138421335,-41322.827638398674,0,2500};
Point(6) = {76313.9301924559,-43602.105658533656,0,2500};
Point(7) = {76236.3624892852,-45959.53675957153,0,2500};
Point(8) = {76639.18245175212,-47877.13549011541,0,2500};
Point(9) = {78769.94024720672,-48017.4789342234,0,2500};
Point(10) = {81118.10969464607,-48034.45090096527,0,2500};
Point(11) = {83184.6846101908,-47813.4992253879,0,2500};
Point(12) = {83495.00022118208,-45810.82638969037,0,2500};
Point(13) = {83435.10534558406,-43470.39917674345,0,2500};
Point(14) = {83475.09591773732,-41179.43717988934,0,2500};
Point(15) = {83430.76741788747,-38889.35867189057,0,2500};
Point(16) = {83506.63754140091,-36545.66231100884,0,2500};
Point(17) = {83109.95426955461,-34579.99614366952,0,2500};
Point(18) = {80982.59924588082,-34412.1743798278,0,2500};
Point(19) = {78634.41611376953,-34394.94331966449,0,2500};
Line(1) = {1,2};
Line(2) = {2,3};
Line(3) = {3,4};
Line(4) = {4,5};
Line(5) = {5,6};
Line(6) = {6,7};
Line(7) = {7,8};
Line(8) = {8,9};
Line(9) = {9,10};
Line(10) = {10,11};
Line(11) = {11,12};
Line(12) = {12,13};
Line(13) = {13,14};
Line(14) = {14,15};
Line(15) = {15,16};
Line(16) = {16,17};
Line(17) = {17,18};
Line(18) = {18,19};
Line(19) = {19,1}; //closing line
Line Loop (1) = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19};
Plane Surface (1) = {1};

//Add stone 1
Point(20) = {14984.775060401515,-34872.56443324336,0,2500};
Point(21) = {14984.775060401515,-34872.56443324336,0,2500};
Point(22) = {14503.944983995685,-38558.56738928147,0,2500};
Point(23) = {14606.371030531154,-42802.3408391358,0,2500};
Point(24) = {14591.429431653807,-46939.589966311854,0,2500};
Point(25) = {17616.28477846177,-48150.866496476294,0,2500};
Point(26) = {21969.83963590304,-47953.12247221658,0,2500};
Point(27) = {26105.333817150487,-48046.48922454783,0,2500};
Point(28) = {30294.82984797651,-47995.95168853255,0,2500};
Point(29) = {34563.35931777658,-48039.51872989639,0,2500};
Point(30) = {38268.26590477225,-47685.69594847238,0,2500};
Point(31) = {38966.76002563397,-43883.48450075368,0,2500};
Point(32) = {36799.43908738177,-41683.86488603165,0,2500};
Point(33) = {32381.573481919455,-41991.41103425121,0,2500};
Point(34) = {28366.808043608555,-41761.65669400756,0,2500};
Point(35) = {23958.365987678888,-42018.77655741193,0,2500};
Point(36) = {21579.860665439035,-40115.463154371675,0,2500};
Point(37) = {21831.755153090122,-35704.31289579342,0,2500};
Point(38) = {18839.344114150157,-34267.50287340956,0,2500};
Line(20) = {20,21};
Line(21) = {21,22};
Line(22) = {22,23};
Line(23) = {23,24};
Line(24) = {24,25};
Line(25) = {25,26};
Line(26) = {26,27};
Line(27) = {27,28};
Line(28) = {28,29};
Line(29) = {29,30};
Line(30) = {30,31};
Line(31) = {31,32};
Line(32) = {32,33};
Line(33) = {33,34};
Line(34) = {34,35};
Line(35) = {35,36};
Line(36) = {36,37};
Line(37) = {37,38};
Line(38) = {38,20}; //closing line
Line Loop (2) = {20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38};
Plane Surface (2) = {2};

//Add stone 2
Point(39) = {83744.46969869843,-28541.901073740803,0,2500};
Point(40) = {83744.46969869843,-28541.901073740803,0,2500};
Point(41) = {83516.6071498982,-30666.22645556206,0,2500};
Point(42) = {83462.92649551797,-33204.64640812219,0,2500};
Point(43) = {84748.87229781708,-34426.14958232675,0,2500};
Point(44) = {87279.29258905847,-34329.421658633146,0,2500};
Point(45) = {89598.68635777534,-34373.278539362145,0,2500};
Point(46) = {92042.14168733773,-34363.09743748207,0,2500};
Point(47) = {94400.0323146939,-34341.80497769778,0,2500};
Point(48) = {96842.68193938867,-34414.44753925569,0,2500};
Point(49) = {98927.09521579297,-34008.71981648681,0,2500};
Point(50) = {99083.2531770517,-31857.426786168424,0,2500};
Point(51) = {99167.61929728785,-29328.256928061077,0,2500};
Point(52) = {97976.03494666865,-28145.415021972036,0,2500};
Point(53) = {95459.82546602687,-28251.02982418101,0,2500};
Point(54) = {93131.74499680976,-28202.324363649223,0,2500};
Point(55) = {90696.8189921719,-28216.90918365322,0,2500};
Point(56) = {88328.61560224497,-28233.203600507684,0,2500};
Point(57) = {85902.13456863942,-28167.914948662692,0,2500};
Line(39) = {39,40};
Line(40) = {40,41};
Line(41) = {41,42};
Line(42) = {42,43};
Line(43) = {43,44};
Line(44) = {44,45};
Line(45) = {45,46};
Line(46) = {46,47};
Line(47) = {47,48};
Line(48) = {48,49};
Line(49) = {49,50};
Line(50) = {50,51};
Line(51) = {51,52};
Line(52) = {52,53};
Line(53) = {53,54};
Line(54) = {54,55};
Line(55) = {55,56};
Line(56) = {56,57};
Line(57) = {57,39}; //closing line
Line Loop (3) = {39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57};
Plane Surface (3) = {3};

//Add stone 3
Point(58) = {22045.5459290919,-28482.50560928132,0,2500};
Point(59) = {22045.5459290919,-28482.50560928132,0,2500};
Point(60) = {21790.56694065912,-30545.293195767295,0,2500};
Point(61) = {21726.913155411297,-33106.10639779917,0,2500};
Point(62) = {22870.15076911432,-34414.50371068997,0,2500};
Point(63) = {25395.640133157198,-34331.94845758634,0,2500};
Point(64) = {27720.669415023232,-34373.44164184686,0,2500};
Point(65) = {30163.882875897158,-34360.724751288624,0,2500};
Point(66) = {32530.778156231285,-34347.11092326274,0,2500};
Point(67) = {34965.38781541265,-34402.83002636746,0,2500};
Point(68) = {37105.44342929478,-34084.40858074448,0,2500};
Point(69) = {37308.192114464924,-32009.789268217253,0,2500};
Point(70) = {37389.41714541289,-29451.54949587401,0,2500};
Point(71) = {36318.476062638256,-28159.313706203906,0,2500};
Point(72) = {33809.641188322836,-28247.393702485126,0,2500};
Point(73) = {31475.49134737235,-28203.132980682883,0,2500};
Point(74) = {29040.57934757229,-28218.229704982874,0,2500};
Point(75) = {26664.24641945778,-28229.269669671554,0,2500};
Point(76) = {24243.554135236336,-28177.146096659188,0,2500};
Line(58) = {58,59};
Line(59) = {59,60};
Line(60) = {60,61};
Line(61) = {61,62};
Line(62) = {62,63};
Line(63) = {63,64};
Line(64) = {64,65};
Line(65) = {65,66};
Line(66) = {66,67};
Line(67) = {67,68};
Line(68) = {68,69};
Line(69) = {69,70};
Line(70) = {70,71};
Line(71) = {71,72};
Line(72) = {72,73};
Line(73) = {73,74};
Line(74) = {74,75};
Line(75) = {75,76};
Line(76) = {76,58}; //closing line
Line Loop (4) = {58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76};
Plane Surface (4) = {4};

//Add stone 4
Point(77) = {106566.6309342892,-15117.729922651093,0,2500};
Point(78) = {106566.6309342892,-15117.729922651093,0,2500};
Point(79) = {105766.49721677572,-20857.83197847739,0,2500};
Point(80) = {105923.35602033234,-27336.13197732807,0,2500};
Point(81) = {105826.91600858665,-33740.39212674085,0,2500};
Point(82) = {105910.37488302375,-40133.43574061114,0,2500};
Point(83) = {105962.62001393673,-46433.02665415574,0,2500};
Point(84) = {110613.54000823139,-48254.78436173394,0,2500};
Point(85) = {117333.00755423016,-47851.89907014311,0,2500};
Point(86) = {123589.80833690625,-48212.395254695504,0,2500};
Point(87) = {129599.71577843762,-47213.97377101564,0,2500};
Point(88) = {129315.96160987533,-42593.50343852705,0,2500};
Point(89) = {123567.38563721538,-41657.77271727913,0,2500};
Point(90) = {116806.0683002498,-42130.78516431107,0,2500};
Point(91) = {112890.55909326852,-39507.11680588726,0,2500};
Point(92) = {113176.20230499549,-32871.781049182515,0,2500};
Point(93) = {112896.84118155706,-26669.076771535707,0,2500};
Point(94) = {113257.88131617519,-20004.34815506083,0,2500};
Point(95) = {111846.395068779,-14778.332048213775,0,2500};
Line(77) = {77,78};
Line(78) = {78,79};
Line(79) = {79,80};
Line(80) = {80,81};
Line(81) = {81,82};
Line(82) = {82,83};
Line(83) = {83,84};
Line(84) = {84,85};
Line(85) = {85,86};
Line(86) = {86,87};
Line(87) = {87,88};
Line(88) = {88,89};
Line(89) = {89,90};
Line(90) = {90,91};
Line(91) = {91,92};
Line(92) = {92,93};
Line(93) = {93,94};
Line(94) = {94,95};
Line(95) = {95,77}; //closing line
Line Loop (5) = {77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95};
Plane Surface (5) = {5};

//Add stone 5
Point(96) = {76732.89168902535,-14922.556742577173,0,2500};
Point(97) = {76732.89168902535,-14922.556742577173,0,2500};
Point(98) = {76221.14459589591,-18673.57206882999,0,2500};
Point(99) = {76333.62221466487,-22894.162568137024,0,2500};
Point(100) = {76304.11411179756,-27051.404126377354,0,2500};
Point(101) = {79335.15598993786,-28341.601693974982,0,2500};
Point(102) = {83219.55332521007,-27571.68728439278,0,2500};
Point(103) = {83341.01985758715,-23620.188135468085,0,2500};
Point(104) = {84649.40068993277,-20602.639285873174,0,2500};
Point(105) = {88961.45996838184,-20735.556693994502,0,2500};
Point(106) = {92979.05696831213,-20564.423729430055,0,2500};
Point(107) = {97444.39278225695,-20785.874762210402,0,2500};
Point(108) = {100421.75380534706,-19646.835137564547,0,2500};
Point(109) = {100464.63237718178,-15536.864660712134,0,2500};
Point(110) = {97455.43787736076,-14387.935302436741,0,2500};
Point(111) = {93058.5601576585,-14558.930110825719,0,2500};
Point(112) = {88952.35007612419,-14475.128738008581,0,2500};
Point(113) = {84718.5333169367,-14533.575734249196,0,2500};
Point(114) = {80488.92531555925,-14457.407766002709,0,2500};
Line(96) = {96,97};
Line(97) = {97,98};
Line(98) = {98,99};
Line(99) = {99,100};
Line(100) = {100,101};
Line(101) = {101,102};
Line(102) = {102,103};
Line(103) = {103,104};
Line(104) = {104,105};
Line(105) = {105,106};
Line(106) = {106,107};
Line(107) = {107,108};
Line(108) = {108,109};
Line(109) = {109,110};
Line(110) = {110,111};
Line(111) = {111,112};
Line(112) = {112,113};
Line(113) = {113,114};
Line(114) = {114,96}; //closing line
Line Loop (6) = {96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114};
Plane Surface (6) = {6};

//Add stone 6
Point(115) = {45708.45017398108,-15128.97604234436,0,2500};
Point(116) = {45708.45017398108,-15128.97604234436,0,2500};
Point(117) = {44931.09522953534,-20471.18280103901,0,2500};
Point(118) = {45153.263058663586,-26592.307764918507,0,2500};
Point(119) = {44941.78772611181,-32630.196519626308,0,2500};
Point(120) = {45219.915085424385,-38602.77778936603,0,2500};
Point(121) = {44764.75931574514,-44808.23463847519,0,2500};
Point(122) = {47777.11129921026,-48356.31469091674,0,2500};
Point(123) = {52327.7973449278,-46345.48488485905,0,2500};
Point(124) = {52025.87356973744,-40326.51575783583,0,2500};
Point(125) = {52956.84693584602,-34990.83635902867,0,2500};
Point(126) = {58166.54764926977,-34267.50224217638,0,2500};
Point(127) = {64463.49039718491,-33908.91745275313,0,2500};
Point(128) = {69910.92039399367,-29898.751212815176,0,2500};
Point(129) = {71743.28888528046,-23803.43242787538,0,2500};
Point(130) = {69073.63863173443,-17846.713496435183,0,2500};
Point(131) = {63153.762788967266,-14680.217572061641,0,2500};
Point(132) = {57180.02669471307,-14562.56714759687,0,2500};
Point(133) = {51000.37831322066,-14413.367560529388,0,2500};
Line(115) = {115,116};
Line(116) = {116,117};
Line(117) = {117,118};
Line(118) = {118,119};
Line(119) = {119,120};
Line(120) = {120,121};
Line(121) = {121,122};
Line(122) = {122,123};
Line(123) = {123,124};
Line(124) = {124,125};
Line(125) = {125,126};
Line(126) = {126,127};
Line(127) = {127,128};
Line(128) = {128,129};
Line(129) = {129,130};
Line(130) = {130,131};
Line(131) = {131,132};
Line(132) = {132,133};
Line(133) = {133,115}; //closing line
Line Loop (7) = {115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133};
Plane Surface (7) = {7};

//Add stone 7
Point(134) = {15008.037677230377,-14922.243031078073,0,2500};
Point(135) = {15008.037677230377,-14922.243031078073,0,2500};
Point(136) = {14496.901968450911,-18670.28116192267,0,2500};
Point(137) = {14609.064927327738,-22888.06116594126,0,2500};
Point(138) = {14578.1272097043,-27043.070390241974,0,2500};
Point(139) = {17595.688949850657,-28345.110862390924,0,2500};
Point(140) = {21489.146175535814,-27549.659595319128,0,2500};
Point(141) = {21616.591872224293,-23577.80029666283,0,2500};
Point(142) = {22951.228861563315,-20595.698792726896,0,2500};
Point(143) = {27271.064689280458,-20737.197024627025,0,2500};
Point(144) = {31281.471212867535,-20563.01967642704,0,2500};
Point(145) = {35746.62656643061,-20787.885178660188,0,2500};
Point(146) = {38704.297943135236,-19629.806570710716,0,2500};
Point(147) = {38734.183741286855,-15521.419079886415,0,2500};
Point(148) = {35714.592437040075,-14389.787583445112,0,2500};
Point(149) = {31321.83086918714,-14557.880630255318,0,2500};
Point(150) = {27218.319225602863,-14475.77433167721,0,2500};
Point(151) = {22987.851904717976,-14533.18807784842,0,2500};
Point(152) = {18761.4543533242,-14457.615423891046,0,2500};
Line(134) = {134,135};
Line(135) = {135,136};
Line(136) = {136,137};
Line(137) = {137,138};
Line(138) = {138,139};
Line(139) = {139,140};
Line(140) = {140,141};
Line(141) = {141,142};
Line(142) = {142,143};
Line(143) = {143,144};
Line(144) = {144,145};
Line(145) = {145,146};
Line(146) = {146,147};
Line(147) = {147,148};
Line(148) = {148,149};
Line(149) = {149,150};
Line(150) = {150,151};
Line(151) = {151,152};
Line(152) = {152,134}; //closing line
Line Loop (8) = {134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152};
Plane Surface (8) = {8};
Physical Surface("Stones") = { 1,2,3,4,5,6,7,8 };

//Add mortar matrix
Point(153) = {14296.901968450911,-48556.31469091674,0,2500};
Point(154) = {129799.71577843762,-48556.31469091674,0,2500};
Point(155) = {129799.71577843762,-14187.935302436741,0,2500};
Point(156) = {14296.901968450911,-14187.935302436741,0,2500};
Line(153) = {153,154};
Line(154) = {154,155};
Line(155) = {155,156};
Line(156) = {156,153}; //closing line
Line Loop (9) = {153,154,155,156};
Plane Surface (9) = {1,2,3,4,5,6,7,8,9};
Physical Surface("Mortar") = { 9 };


Coherence;
Mesh 1;
Mesh 2;
Coherence Mesh;
Coherence;
Save "Test_contourxxxxxxx.msh";